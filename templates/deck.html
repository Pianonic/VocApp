{% extends "base.html" %} {% block title %}{{ deck['name'] }}{% endblock %} {%
    block content %}
    <div class="mb-5"> <!-- Added margin-bottom class -->
        <div
          class="d-flex justify-content-between align-items-center mb-3 pb-2 border-bottom flex-wrap gap-2"
        >
          <!-- Deck Info -->
          <div>
            <h1 class="text-3xl font-semibold text-gray-800 mb-1">
              {{ deck['name'] }}
            </h1>
            <p class="text-gray-600 mb-0">
              {{ deck['description'] or 'No description.' }}
            </p>
            <div class="mt-1">
              <span
                class="inline-block bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded"
                >{{ deck['target_exam'] or 'General' }}</span
              >
              <span
                class="inline-block bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded"
                >{{ deck['level'] or 'Any' }}</span
              >
            </div>
          </div>
          <!-- Action Buttons -->
          <div class="flex-shrink-0">
            <!-- ADD THIS LEARN BUTTON -->
            {% if words %} {# Only show Learn button if there are words #}
            <a
              href="{{ url_for('learn_deck', deck_id=deck['id']) }}"
              class="btn btn-info btn-sm me-2"
            >
                <i class="fa-solid fa-graduation-cap"></i>
              Learn Deck
            </a>
            {% endif %}
            <!-- END ADDED BUTTON -->
            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary btn-sm"
              >&laquo; Back to Decks</a
            >
          </div>
        </div>
        
        <!-- Add Word Form (remains the same) -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">Add New Word/Phrase</div>
          <div class="card-body">
            <form
              action="{{ url_for('view_deck', deck_id=deck['id']) }}"
              method="post"
            >
              <input type="hidden" name="action" value="add_word"> <!-- Ensure action is specified -->
              <div class="row g-3 mb-3">
                <div class="col-md-6">
                  <label for="term" class="form-label font-medium text-gray-700"
                    >Term <span class="text-red-500">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="term"
                    name="term"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="translation" class="form-label font-medium text-gray-700"
                    >Translation (Optional)</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="translation"
                    name="translation"
                  />
                </div>
              </div>
              <div class="mb-3">
                <label for="definition" class="form-label font-medium text-gray-700"
                  >Definition <span class="text-red-500">*</span></label
                >
                <textarea
                  class="form-control"
                  id="definition"
                  name="definition"
                  rows="2"
                  required
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="example" class="form-label font-medium text-gray-700"
                  >Example Sentence (Optional)</label
                >
                <textarea
                  class="form-control"
                  id="example"
                  name="example"
                  rows="2"
                ></textarea>
              </div>
              <button type="submit" class="btn btn-success">
                Add Word
              </button>
            </form>
          </div>
        </div>
        
        
        <!-- List Words (remains the same, but note words are ordered by creation date here) -->
        <h2 class="text-2xl font-semibold text-gray-700 mb-3">Words in this Deck</h2>
        {% if not words %}
        <div class="alert alert-secondary" role="alert">
          This deck is empty. Add some words using the form above!
        </div>
        {% else %}
        <ul class="list-group shadow-sm">
          {% for word in words %}
          <li
            class="list-group-item d-flex justify-content-between align-items-start flex-wrap"
          >
            <div class="me-auto mb-2 mb-md-0">
              <div class="fw-bold text-lg text-gray-800">{{ word['term'] }}</div>
              {% if word['translation'] %}
              <div class="text-sm text-purple-700 italic">[{{ word['translation'] }}]</div>
              {% endif %}
              <div class="text-gray-700">{{ word['definition'] }}</div>
              {% if word['example'] %}
              <small class="text-muted fst-italic">E.g., "{{ word['example'] }}"</small>
              {% endif %}
            </div>
            <form
              action="{{ url_for('delete_word', word_id=word['id']) }}"
              method="post"
              class="ms-2"
              onsubmit="return confirm('Are you sure you want to delete this word?');"
            >
              <!-- Hidden input to redirect back correctly -->
              <input type="hidden" name="deck_id" value="{{ deck['id'] }}" />
              <button type="submit" class="btn btn-outline-danger btn-sm py-1 px-2">
                <i class="fas fa-trash"></i>
              </button>
            </form>
          </li>
          {% endfor %}
        </ul>
        {% endif %}
    </div> <!-- End of added margin-bottom container -->
{% endblock %}
